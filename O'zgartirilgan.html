<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Korzinka - Boshqaruv Tizimi 7.1 (Foydalanuvchiga ajratilgan)</title>
    <style>
        /* --- 0. GLOBAL VA FONTLAR --- */
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap');
        * { box-sizing: border-box; font-family: 'Roboto', sans-serif; outline: none; }
        body { margin: 0; background-color: #F8F9FA; display: flex; height: 100vh; overflow: hidden; color: #333; }
        
        /* --- TIZIM TARTIBI (LOGIN VA ASOSIY APP) --- */
        #main-app { display: flex; width: 100%; height: 100%; }

        /* --- 1. SIDEBAR VA MENU (YAXSHILANGAN DIZAYN) --- */
        .sidebar { 
            width: 280px; 
            background: #2C3E50; /* Qora Ko'k */
            border-right: 1px solid #1E2B38; 
            display: flex; 
            flex-direction: column; 
            color: #ECF0F1; 
            transition: all 0.3s ease-in-out; 
            padding: 0;
            overflow-y: auto;
            flex-shrink: 0;
        }
        .logo { 
            text-align: center; 
            color: #2ECC71; 
            font-size: 28px; 
            font-weight: 700; 
            padding: 20px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        
        /* Profilni Sidebar tepasiga joylash */
        .profile-section {
            display: flex;
            align-items: center;
            padding: 15px;
            gap: 15px;
            background: #34495E;
            color: white;
            cursor: pointer;
            position: relative;
            z-index: 100; /* Sidebarning eng yuqorisida turishi uchun */
        }
        .profile-image {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid #2ECC71;
            object-fit: cover;
        }
        .profile-info { flex-grow: 1; }
        .profile-info h4 { margin: 0; font-size: 16px; font-weight: 500;}
        .profile-info p { margin: 0; font-size: 12px; color: #BDC3C7; }

        /* Profil menu ochilishi */
        .profile-menu {
            position: absolute;
            top: 100%; 
            left: 0;
            width: 100%;
            background: #34495E;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            border-top: 1px solid #2C3E50;
            z-index: 50;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-in-out;
        }
        .profile-menu.show { max-height: 200px; }
        .menu-item-profile {
            padding: 10px 15px; font-size: 14px; cursor: pointer; transition: background 0.2s, color 0.2s;
        }
        .menu-item-profile:hover { background: #2ECC71; color: #2C3E50; }

        /* Menu Asosiy Stillari */
        .menu-wrapper { display: flex; flex-direction: column; gap: 2px; padding: 10px; flex-grow: 1;} 
        .menu-item { 
            padding: 12px 15px; cursor: pointer; color: #ECF0F1; display: flex; 
            justify-content: space-between; align-items: center; transition: 0.3s; 
            font-size: 16px; border-radius: 6px; position: relative; overflow: hidden;
            font-weight: 400;
        }
        .menu-item:hover { background: rgba(255, 255, 255, 0.1); }
        .menu-item.active { background-color: #3498DB; font-weight: 500;} 
        
        .menu-left { display: flex; gap: 15px; align-items: center; }
        .arrow-icon { font-size: 10px; transition: 0.3s; }
        .menu-item.open .arrow-icon { transform: rotate(180deg); }
        .submenu { max-height: 0; overflow: hidden; transition: max-height 0.4s ease-out; background-color: #34495E; padding: 0 0 5px 0; }
        
        .submenu-item { 
            padding: 10px 25px 10px 50px; cursor: pointer; color: #BDC3C7; display: block; 
            transition: 0.2s; font-size: 14px; text-decoration: none; border-radius: 4px;
        }
        .submenu-item:hover { color: #2ECC71; background-color: #2C3E50; }
        .submenu-item.active { color: #2ECC71; font-weight: 600; background-color: #2C3E50; border-left: 3px solid #2ECC71; }
        
        #menu-exit { margin-top: auto; background: #E74C3C; margin-bottom: 0px; font-weight: 600; }
        #menu-exit:hover { background: #C0392B; }

        /* --- 2. MAIN CONTENT VA JADVAL STILI --- */
        .main-content { flex: 1; padding: 25px; display: flex; flex-direction: column; position: relative; overflow-y: auto; }
        .page-section { display: none; flex-direction: column; height: 100%; opacity: 0; transform: translateY(15px); transition: opacity 0.5s, transform 0.5s; }
        .page-section.active-page { display: flex; opacity: 1; transform: translateY(0); } 

        .toolbar { background: white; padding: 15px 20px; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); display: flex; justify-content: space-between; margin-bottom: 20px; align-items: center; }
        .toolbar-left { display: flex; gap: 15px; align-items: center; } 
        .btn-group { display: flex; gap: 10px; }
        
        .btn { 
            padding: 10px 18px; border-radius: 8px; border: 1px solid transparent; cursor: pointer; 
            display: flex; align-items: center; gap: 8px; font-weight: 500; transition: 0.3s; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.1); 
        }
        .btn:hover { transform: translateY(-1px); box-shadow: 0 4px 8px rgba(0,0,0,0.15); }

        .btn-add { background: #2ECC71; color: white; } 
        .btn-edit { background: #3498DB; color: white; } 
        .btn-delete { background: #E74C3C; color: white; } 
        .btn-contact { background: #F39C12; color: white; } 
        
        /* Inputlar (Forma stillarini yaxshilash) */
        input[type="text"], input[type="number"], input[type="password"], input[type="tel"], select {
            width: 100%;
            padding: 10px 15px;
            margin-top: 5px;
            border: 1px solid #DDD;
            border-radius: 6px;
            transition: border-color 0.3s, box-shadow 0.3s;
            font-size: 15px;
        }
        input:focus, select:focus {
            border-color: #3498DB;
            box-shadow: 0 0 5px rgba(52, 152, 219, 0.2);
        }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: 500; color: #555; }
        
        /* Jadval stillari */
        .table-container { background: white; flex: 1; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); overflow: auto; display: flex; flex-direction: column;} 
        table { width: 100%; border-collapse: collapse; }
        th { text-align: left; padding: 15px; background: #ECF0F1; border-bottom: 2px solid #BDC3C7; color: #7F8C8D; position: sticky; top: 0; font-weight: 600; }
        td { padding: 12px 15px; border-bottom: 1px solid #ECF0F1; cursor: pointer; transition: background-color 0.2s; }
        tr.selected-row { background-color: #E6F7EF !important; border-left: 5px solid #2ECC71; }
        tr:hover:not(thead tr) { background-color: #F8F9FA; }
        
        /* SAVDO OYNASI MAXSUS STIL */
        .sales-area { display: flex; flex: 1; gap: 20px; margin-bottom: 15px; }
        .inventory-section, .cart-section { flex: 1; display: flex; flex-direction: column; }
        .sales-footer { 
            background: white; padding: 20px 25px; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); 
            display: flex; justify-content: space-between; align-items: center; font-size: 20px; font-weight: 700; 
            border-top: 3px solid #2ECC71;
        }
        .btn-payment { background: #2ECC71; color: white; border: none; font-size: 18px; }
        
        .quantity-controls {
            display: flex; align-items: center; justify-content: space-between; width: 100px;
        }
        .quantity-controls input {
            width: 40px; text-align: center; padding: 5px; margin: 0 5px;
        }
        .qty-btn {
            background: #BDC3C7; color: #2C3E50; border: none; padding: 5px 8px; cursor: pointer; border-radius: 4px;
        }

        /* Parol ko'rish tugmasi */
        .password-container { position: relative; }
        .password-toggle { 
            position: absolute; right: 10px; top: 50%; transform: translateY(-50%); 
            cursor: pointer; color: #999; 
        }
        .auth-footer-links {
            display: flex; justify-content: space-between; margin-top: 15px; padding: 0 10px; 
        }
        .auth-footer-links a { 
            color: #3498DB; text-decoration: none; transition: color 0.2s; padding: 5px 8px;
            background: #ECF0F1; border-radius: 4px; font-weight: 500;
        }

        /* --- 3. MODALLAR --- */
        .modal-overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); 
            display: none; justify-content: center; align-items: center; z-index: 9000; opacity: 0; 
            transition: opacity 0.3s ease-in-out; 
        }
        .modal-overlay.show { display: flex; opacity: 1; }
        .modal-box { 
            background: white; width: 450px; max-width: 90%; padding: 30px; border-radius: 12px; 
            transform: scale(0.9); transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.3s; 
            position: relative; box-shadow: 0 15px 30px rgba(0,0,0,0.3);
        }
        .modal-overlay.show .modal-box { transform: scale(1); }
        .close-btn { 
            position: absolute; top: 10px; right: 10px; background: none; border: none; 
            font-size: 20px; color: #999; cursor: pointer; transition: color 0.2s;
        }
        .close-btn:hover { color: #E74C3C; }
        
        .btn-save { background: #3498DB; color: white; width: 100%; padding: 12px; border-radius: 8px; border: none;}
        .btn-save:hover { background: #2980B9; }

        /* Profil tahrirlash rasmi */
        .profile-editor-image { display: block; width: 80px; height: 80px; border-radius: 50%; margin: 0 auto 15px; border: 3px solid #2ECC71; }
        .btn-upload-profile { background: #F39C12; color: white; padding: 8px 15px; border-radius: 6px; border: none; cursor: pointer; display: block; margin: 0 auto 15px; }

        /* Chek Stillari */
        #receipt-content { font-family: monospace; font-size: 13px; line-height: 1.4; }
        /* --- PRINT STILI (CHOP ETISH UCHUN) --- */
        @media print {
            body * { visibility: hidden; } 
            .modal-overlay { background: none !important; } 
            #receiptModal, #receiptModal * { visibility: visible; } 
            #receiptModal {
                position: absolute; left: 0; top: 0; width: 100%; height: auto; background: none; display: block !important; opacity: 1 !important;
            }
            #receiptModal .modal-box { 
                box-shadow: none !important; transform: none !important; width: 100% !important; max-width: 400px; margin: 0 auto; padding: 0;
            }
            #receiptModal .btn, #receiptModal .btn-save { display: none; }
        }
    </style>
</head>
<body>

    <div id="main-app" style="display: none;">

        <div class="sidebar">
            <div class="logo">üõí Korzinka</div>
            
            <div class="profile-section" onclick="toggleProfileMenu()">
                <img id="user-profile-img" class="profile-image" src="https://via.placeholder.com/150/2ECC71/ffffff?text=U" alt="Profil">
                <div class="profile-info">
                    <h4 id="current-user-name">Foydalanuvchi</h4>
                    <p id="current-user-role">Roli</p>
                </div>
                <div class="profile-menu" id="profileMenu">
                    <div class="menu-item-profile" onclick="openEditProfileModal(); event.stopPropagation();">‚úçÔ∏è Profilni tahrirlash</div>
                    <div class="menu-item-profile" onclick="openLoginModal(true); event.stopPropagation();">üîÑ Boshqa akk kiritish</div>
                    <div class="menu-item-profile" onclick="logout(); event.stopPropagation();">üö™ Chiqish</div>
                </div>
            </div>

            <div class="menu-wrapper">
                <div class="menu-item" onclick="toggleMenu('submenu-data', this)">
                    <div class="menu-left"><span>üìÑ</span> Ma'lumotlar</div><span class="arrow-icon">‚ñº</span>
                </div>
                <div class="submenu" id="submenu-data" style="max-height: 0px;">
                    <div class="submenu-item active" id="menu-products" onclick="showPage('products')">üì¶ Tovarlar</div>
                    <div class="submenu-item" id="menu-customers" onclick="showPage('customers')">üë• Xaridorlar</div>
                    <div class="submenu-item" id="menu-users" onclick="showPage('users')" style="display: none;">üë§ Foydalanuvchilar</div>
                    <div class="submenu-item" id="menu-suppliers" onclick="showPage('suppliers')">üöõ Yuk beruvchilar</div>
                </div>

                <div class="menu-item" onclick="showPage('reports')"><div class="menu-left"><span>üîç</span> Hisobotlar</div></div>
                <div class="menu-item" id="menu-sales" onclick="showPage('sales')"><div class="menu-left"><span>üí∞</span> Savdo Oynasi</div></div>
                <div class="menu-item" onclick="showPage('storage')"><div class="menu-left"><span>üè†</span> Ombor</div></div>
                
                <div class="menu-item" id="menu-exit" onclick="goBack()">
                    <div class="menu-left"><span>üîô</span> Chiqish</div>
                </div>
            </div>
        </div>

        <div class="main-content">

            <div id="page-products" class="page-section active-page">
                 <div class="toolbar">
                    <div class="toolbar-left"> 
                        <input type="text" placeholder="Tovarni qidirish..." oninput="searchProducts(this.value)">
                        <div class="btn-group">
                            <button class="btn btn-add" onclick="openProductModal(false)"><span>+</span> Qo'shish</button>
                            <button class="btn btn-edit" onclick="openProductModal(true)"><span>‚úé</span> O'zgartirish</button>
                            <button class="btn btn-delete" onclick="deleteProduct()"><span>üóë</span> O'chirish</button>
                        </div>
                    </div>
                </div>
                <div class="table-container">
                    <table id="products-table">
                        <thead><tr><th style="width: 50px;">‚Ññ</th><th>Nomi</th><th>Olish narxi</th><th>Sotish narxi</th><th>Qoldiq</th></tr></thead>
                        <tbody id="products-body"></tbody>
                    </table>
                </div>
            </div>

            <div id="page-customers" class="page-section">
                <div class="toolbar">
                    <div class="toolbar-left"> 
                        <input type="text" placeholder="Xaridorni qidirish..." oninput="searchCustomers(this.value)">
                        <div class="btn-group">
                            <button class="btn btn-add" onclick="openCustomerModal(false)"><span>+</span> Qo'shish</button>
                            <button class="btn btn-edit" onclick="openCustomerModal(true)"><span>‚úé</span> O'zgartirish</button>
                            <button class="btn btn-delete" onclick="deleteCustomer()"><span>üóë</span> O'chirish</button>
                        </div>
                    </div>
                </div>
                <div class="table-container">
                    <table id="customers-table">
                        <thead><tr><th style="width: 50px;">‚Ññ</th><th>Ism/Familiya</th><th>Telefon</th><th>Manzil</th></tr></thead>
                        <tbody id="customers-body"></tbody>
                    </table>
                </div>
            </div>

            <div id="page-users" class="page-section">
                <div class="toolbar">
                    <div class="toolbar-left"> 
                        <input type="text" placeholder="Foydalanuvchini qidirish..." oninput="searchUsers(this.value)">
                        <div class="btn-group">
                            <button class="btn btn-add" onclick="openUserModal(false)"><span>+</span> Qo'shish</button>
                            <button class="btn btn-edit" onclick="openUserModal(true)"><span>‚úé</span> O'zgartirish</button>
                            <button class="btn btn-delete" onclick="deleteUser()"><span>üóë</span> O'chirish</button>
                        </div>
                    </div>
                </div>
                <div class="table-container">
                    <table id="users-table">
                        <thead><tr><th style="width: 50px;">‚Ññ</th><th>Login</th><th>Roli</th><th>Telefon</th></tr></thead>
                        <tbody id="users-body"></tbody>
                    </table>
                </div>
            </div>

            <div id="page-suppliers" class="page-section">
                 <div class="toolbar">
                    <div class="toolbar-left"> 
                        <input type="text" placeholder="Yuk beruvchini qidirish..." oninput="searchSuppliers(this.value)">
                        <div class="btn-group">
                            <button class="btn btn-add" onclick="openSupplierModal(false)"><span>+</span> Qo'shish</button>
                            <button class="btn btn-edit" onclick="openSupplierModal(true)"><span>‚úé</span> O'zgartirish</button>
                            <button class="btn btn-delete" onclick="deleteSupplier()"><span>üóë</span> O'chirish</button>
                             <button class="btn btn-contact" onclick="contactSupplier()"><span>üìû</span> Bog'lanish</button>
                        </div>
                    </div>
                </div>
                <div class="table-container">
                    <table id="suppliers-table">
                        <thead><tr><th style="width: 50px;">‚Ññ</th><th>Kompaniya/Ism</th><th>Telefon</th><th>Bank hisobi</th></tr></thead>
                        <tbody id="suppliers-body"></tbody>
                    </table>
                </div>
            </div>
            
            <div id="page-sales" class="page-section">
                <h2 style="text-align: center; color: #2ECC71; margin-top: 0;">Savdo oynasi</h2>
                <div class="toolbar">
                    <div class="toolbar-left">
                        <input type="text" id="sales-search-input" placeholder="Tovarni qidirish..." oninput="searchInventory(this.value)">
                        <button class="btn btn-delete" onclick="clearCart()"><span>üßπ</span> Savatni tozalash</button>
                    </div>
                </div>
                <div class="sales-area">
                    <div class="inventory-section">
                        <div class="table-container">
                            <h3 style="padding: 15px; margin: 0; background: #ECF0F1;">Ombordagi Tovarlar (ikki marta bosing)</h3>
                            <table id="inventory-table">
                                <thead><tr><th style="width: 50%;">Nomi</th><th style="width: 30%;">Narxi</th><th style="width: 20%;">Qoldiq</th></tr></thead>
                                <tbody id="inventory-body"></tbody>
                            </table>
                        </div>
                    </div>
                    <div class="cart-section">
                        <div class="table-container">
                            <h3 style="padding: 15px; margin: 0; background: #ECF0F1;">Savat</h3>
                            <table id="cart-table">
                                <thead><tr><th style="width: 35%;">Nomi</th><th style="width: 25%;">Narxi</th><th style="width: 30%;">Miqdori</th><th style="width: 10%;"></th></tr></thead>
                                <tbody id="cart-body"></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="sales-footer">
                    <div>Jami summa: <span class="total-sum-text" id="total-sum-value">0 so'm</span></div>
                    <button class="btn-payment btn" onclick="makePayment()">üí≥ To'lov qilish</button>
                </div>
            </div>
            
            <div id="page-reports" class="page-section">
                <div class="toolbar">
                    <h2 style="color: #3498DB; margin: 0;">üìä Hisobotlar</h2>
                    <input type="text" placeholder="Tovarni qidirish..." oninput="searchReports(this.value)">
                </div>
                 <div class="table-container">
                    <table id="reports-table">
                        <thead>
                            <tr style="background: #3498DB; color: white;">
                                <th style="width: 50px;">‚Ññ</th>
                                <th>Nomi</th>
                                <th>Olish narxi</th>
                                <th>Sotish narxi</th>
                                <th>Qoldiq</th>
                                <th>Kim qo'shgan</th>
                            </tr>
                        </thead>
                        <tbody id="reports-body"></tbody>
                    </table>
                     <div class="sales-footer" style="border-top: 1px solid #ddd;">
                        <div>Jami Umumiy Sotish Summasi:</div>
                        <div id="reports-total-value">0 so'm</div>
                     </div>
                </div>
            </div>
             
            <div id="page-storage" class="page-section" style="justify-content: center; align-items: center; font-size: 24px; color: #7F8C8D;">
                üì¶ Ombor boshqaruvi sahifasi hozircha mavjud emas.
            </div>
            
        </div>
    </div> <div class="modal-overlay show" id="loginModal">
        <div class="modal-box">
            <h2 style="text-align:center; color:#2ECC71; margin-bottom: 25px;">Tizimga kirish</h2>
            
            <div id="otp-info-box" style="padding: 10px; background: #FFF3CD; border: 1px solid #FFEBAA; border-radius: 8px; margin-bottom: 20px; font-size: 14px; text-align: center; display: none; color: #856404;">
                <p style="margin: 0;">Parolni tiklash uchun **vaqtinchalik kod**:</p>
                <h3 id="generated-otp" style="margin: 5px 0 0; color: #E74C3C; font-size: 20px;"></h3>
            </div>
            
            <div class="form-group"><label>Login</label><input type="text" id="login-input" value="Akramxon" onkeydown="if(event.key === 'Enter') document.getElementById('password-input').focus()"></div>
            <div class="form-group">
                <label>Parol</label>
                <div class="password-container">
                    <input type="password" id="password-input" value="123" onkeydown="if(event.key === 'Enter') checkLogin()">
                    <span class="password-toggle" onclick="togglePasswordVisibility('password-input', this)">üëÅÔ∏è</span>
                </div>
            </div>
            <p id="login-error" style="color: #E74C3C; text-align: center; height: 1.2em;"></p>
            <button class="btn-save" onclick="checkLogin()">Kirish</button>
            
            <div class="auth-footer-links">
                <a href="#" onclick="openForgotPasswordModal(true)">Parolni unutdingizmi?</a>
                <a href="#" onclick="openRegisterModal(true)">Yangi akkaunt ochish</a>
            </div>
            
        </div>
    </div>

    <div class="modal-overlay" id="registerModal">
        <div class="modal-box">
            <button class="close-btn" onclick="closeModal('registerModal'); openLoginModal()">‚úñ</button>
            <h2 style="text-align:center; color:#2ECC71;">Yangi Akkaunt</h2>
            <div class="form-group"><label>Login</label><input type="text" id="reg-login"></div>
            <div class="form-group">
                <label>Parol</label>
                <div class="password-container">
                    <input type="password" id="reg-password">
                    <span class="password-toggle" onclick="togglePasswordVisibility('reg-password', this)">üëÅÔ∏è</span>
                </div>
            </div>
            <div class="form-group"><label>Telefon Raqami</label><input type="tel" id="reg-phone" placeholder="+998XXYYYYZZZZ"></div>
            <div class="form-group">
                <label>Huquq (Role)</label>
                <select id="reg-role"><option value="Boshliq">Boshliq</option><option value="Admin">Admin</option><option value="Kassir" selected>Kassir</option></select>
            </div>
             <div class="form-group">
                <label>Profil Rasmi</label>
                <button class="btn-upload-profile" onclick="document.getElementById('reg-profile-file').click()">Rasm tanlash</button>
                <input type="file" id="reg-profile-file" accept="image/*" style="display: none;" onchange="updateFileNameDisplay('reg-profile-file', 'reg-file-name')">
                <span id="reg-file-name" style="font-size: 12px; color: #777;">Rasm tanlanmagan</span>
            </div>
            <p id="register-error" style="color: #E74C3C; text-align: center; height: 1.2em;"></p>
            <button class="btn-save" onclick="registerUser()">Ro'yxatdan o'tish</button>
        </div>
    </div>

    <div class="modal-overlay" id="forgotPasswordModal">
        <div class="modal-box">
            <button class="close-btn" onclick="closeModal('forgotPasswordModal'); openLoginModal()">‚úñ</button>
            <h2 style="text-align:center; color:#E74C3C; margin-bottom: 20px;">Parolni tiklash</h2>
            
            <div id="fp-step-1">
                <p style="text-align: center; color: #555;">Akkauntni tasdiqlash uchun loginni kiriting.</p>
                <div class="form-group"><label>Login</label><input type="text" id="fp-login"></div>
                <p id="fp-error" style="color: #E74C3C; text-align: center; height: 1.2em;"></p>
                <button class="btn-save" style="background: #3498DB; color: white;" onclick="checkLoginForReset()">Davom etish</button>
            </div>
            
            <div id="fp-step-2" style="display: none;">
                <p style="text-align: center; color: #2ECC71;">Oxirgi kirishda berilgan 4 xonali vaqtinchalik kodni kiriting.</p>
                <div class="form-group">
                    <label>Tasdiqlash KODI</label>
                    <input type="number" id="fp-code-input" maxlength="4" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <p id="fp-error-2" style="color: #E74C3C; text-align: center; height: 1.2em;"></p>
                <button class="btn-save" style="background: #2ECC71; color: white;" onclick="verifyResetCode()">Tasdiqlash</button>
                <div style="text-align: center; margin-top: 15px;">
                    <button class="btn" style="background: none; color: #3498DB; border: none; padding: 0;" onclick="alert('Iltimos, avval login qilganingizda berilgan 4 xonali kodni eslang.')">Yordam kerakmi?</button>
                </div>
            </div>
            
            <div id="fp-step-3" style="display: none;">
                <p style="text-align: center; color: #2ECC71;">Yangi parolni kiriting.</p>
                <div class="form-group">
                    <label>Yangi parol</label>
                    <div class="password-container">
                        <input type="password" id="fp-new-password">
                        <span class="password-toggle" onclick="togglePasswordVisibility('fp-new-password', this)">üëÅÔ∏è</span>
                    </div>
                </div>
                <div class="form-group">
                    <label>Parolni tasdiqlash</label>
                    <div class="password-container">
                        <input type="password" id="fp-confirm-password">
                        <span class="password-toggle" onclick="togglePasswordVisibility('fp-confirm-password', this)">üëÅÔ∏è</span>
                    </div>
                </div>
                <p id="fp-error-3" style="color: #E74C3C; text-align: center; height: 1.2em;"></p>
                <button class="btn-save" style="background: #2ECC71; color: white;" onclick="resetPassword()">Parolni o'zgartirish</button>
            </div>

        </div>
    </div>
    
    <div class="modal-overlay" id="editProfileModal">
        <div class="modal-box">
            <button class="close-btn" onclick="closeModal('editProfileModal')">‚úñ</button>
            <h2 style="text-align:center; color:#2ECC71;">Profilni tahrirlash</h2>
            
            <img id="edit-profile-img" class="profile-editor-image" src="https://via.placeholder.com/150/2ECC71/ffffff?text=U" alt="Profil rasmi">
            <button class="btn-upload-profile" onclick="document.getElementById('edit-profile-file').click()">üë§ Profil Rasmini Tahrirlash</button>
            <input type="file" id="edit-profile-file" accept="image/*" style="display: none;" onchange="handleEditProfileImage(event)">

            <div class="form-group"><label>Login (Ism)</label><input type="text" id="edit-login"></div>
            
            <div class="form-group">
                <label>Parol</label>
                <div class="password-container">
                    <input type="password" id="edit-password" placeholder="Parolni o'zgartirish uchun kiriting">
                    <span class="password-toggle" onclick="togglePasswordVisibility('edit-password', this)">üëÅÔ∏è</span>
                </div>
            </div>
            
            <div class="form-group"><label>Telefon Raqami</label><input type="tel" id="edit-phone" placeholder="+998XXYYYYZZZZ"></div>
            <p id="edit-profile-error" style="color: #E74C3C; text-align: center; height: 1.2em;"></p>
            <button class="btn-save" onclick="saveProfileChanges()">üíæ O'zgarishlarni saqlash</button>
        </div>
    </div>

    <div class="modal-overlay" id="productModal">
        <div class="modal-box">
             <button class="close-btn" onclick="closeModal('productModal')">‚úñ</button>
            <h2 id="p-modal-title" style="text-align:center; color:#3498DB;">Tovarni qo'shish</h2>
            <div class="form-group"><label>Tovar nomi</label><input type="text" id="p-name"></div>
            <div class="form-group"><label>Olish narxi (so'm)</label><input type="number" id="p-buy"></div>
            <div class="form-group"><label>Sotish narxi (so'm)</label><input type="number" id="p-sell"></div>
            <div class="form-group"><label>Qoldiq miqdori</label><input type="number" id="p-stock"></div>
            <button class="btn-save" onclick="saveProduct()">Saqlash</button>
        </div>
    </div>

    <div class="modal-overlay" id="customerModal">
        <div class="modal-box">
             <button class="close-btn" onclick="closeModal('customerModal')">‚úñ</button>
            <h2 id="c-modal-title" style="text-align:center; color:#3498DB;">Xaridor qo'shish</h2>
            <div class="form-group"><label>Ism/Familiya</label><input type="text" id="c-name"></div>
            <div class="form-group"><label>Telefon raqami</label><input type="tel" id="c-phone" placeholder="+998XXYYYYZZZZ"></div>
            <div class="form-group"><label>Manzil</label><input type="text" id="c-address"></div>
            <button class="btn-save" onclick="saveCustomer()">Saqlash</button>
        </div>
    </div>
    
    <div class="modal-overlay" id="userModal">
        <div class="modal-box">
             <button class="close-btn" onclick="closeModal('userModal')">‚úñ</button>
            <h2 id="u-modal-title" style="text-align:center; color:#3498DB;">Foydalanuvchi qo'shish</h2>
            <div class="form-group"><label>Login</label><input type="text" id="u-login"></div>
            <div class="form-group"><label>Parol</label><input type="password" id="u-password"></div>
            <div class="form-group"><label>Telefon</label><input type="tel" id="u-phone"></div>
            <div class="form-group">
                <label>Huquq (Role)</label>
                <select id="u-role"><option value="Boshliq">Boshliq</option><option value="Admin">Admin</option><option value="Kassir">Kassir</option></select>
            </div>
            <p id="user-modal-error" style="color: #E74C3C; text-align: center; height: 1.2em;"></p>
            <button class="btn-save" onclick="saveUser()">Saqlash</button>
        </div>
    </div>

    <div class="modal-overlay" id="supplierModal">
        <div class="modal-box">
             <button class="close-btn" onclick="closeModal('supplierModal')">‚úñ</button>
            <h2 id="s-modal-title" style="text-align:center; color:#3498DB;">Yuk beruvchi qo'shish</h2>
            <div class="form-group"><label>Kompaniya/Ism</label><input type="text" id="s-name"></div>
            <div class="form-group"><label>Telefon raqami</label><input type="tel" id="s-phone" placeholder="+998XXYYYYZZZZ"></div>
            <div class="form-group"><label>Manzil</label><input type="text" id="s-address"></div>
            <div class="form-group"><label>Bank hisob raqami</label><input type="text" id="s-bank"></div>
            <button class="btn-save" onclick="saveSupplier()">Saqlash</button>
        </div>
    </div>
    
    <div class="modal-overlay" id="receiptModal">
        <div class="modal-box" style="width: 400px; padding: 0;">
            <div id="receipt-content" style="padding: 20px; color: #333;"></div>
            <div style="padding: 15px 20px; display: flex; justify-content: space-between; gap: 10px; border-top: 1px solid #EEE;">
                <button class="btn" style="background: #E74C3C; color: white; flex: 1;" onclick="closeModal('receiptModal')">Yopish</button>
                <button class="btn btn-save" style="background: #2ECC71; color: white; flex: 1;" onclick="printReceipt()">üñ®Ô∏è Chop etish</button>
            </div>
        </div>
    </div>


    <script>
        // --- BOSH LANG'ICH MA'LUMOTLAR ---
        const initialData = {
            // userId: 1 (Akramxon) ma'lumotlari
            products: [
                { id: 1, userId: 1, name: "Olmajonim", buy: 7000, sell: 9000, stock: 30 },
                { id: 2, userId: 1, name: "Bananxon", buy: 18000, sell: 22000, stock: 20 },
                { id: 3, userId: 1, name: "Nokjon", buy: 12000, sell: 16000, stock: 30 }, 
            ],
            customers: [
                { id: 101, userId: 1, name: "Azimov Sardor", phone: "+998901112233", address: "Toshkent" },
            ],
            // Barcha foydalanuvchilar (Global)
            users: [
                { id: 1, login: "Akramxon", password: "123", role: "Boshliq", image: null, phone: "+998901234567", currentOtp: null }, 
                { id: 2, login: "Shamsiddin", password: "456", role: "Kassir", image: null, phone: "+998971234567", currentOtp: null }
            ],
            suppliers: [
                { id: 201, userId: 1, name: "G'ofurov Shokir", phone: "+998994445566", address: "Samarqand", bankAccount: "4010186000000001001" }
            ],
        };

        // --- GLOBAL O'ZGARUVCHILAR ---
        let products = [];
        let customers = [];
        let users = [];
        let suppliers = [];
        let cart = []; 

        let selectedProductId = null; 
        let selectedCustomerId = null; 
        let selectedUserId = null; 
        let selectedSupplierId = null; 

        let isEditMode = false;
        let currentUser = null; 
        let resetUser = null; 
        let currentSearchQuery = { products: '', customers: '', users: '', suppliers: '', reports: '', sales: '' };


        // ===============================================
        // ========== LOCAL STORAGE VA INIT FUNKSIYALARI ==========
        // ===============================================

        function initData() {
            try {
                // Ma'lumotlarni yuklash. Agar bo'lmasa initialData ni ishlatish.
                products = JSON.parse(localStorage.getItem('products')) || initialData.products;
                customers = JSON.parse(localStorage.getItem('customers')) || initialData.customers;
                
                let storedUsers = JSON.parse(localStorage.getItem('users')) || initialData.users;
                users = storedUsers.map(u => ({...u, currentOtp: null})); 
                
                suppliers = JSON.parse(localStorage.getItem('suppliers')) || initialData.suppliers;
                
                if (!localStorage.getItem('users')) saveData();
            } catch (e) {
                console.error("Ma'lumotlarni yuklashda xatolik:", e);
            }
        }

        function saveData() {
            try {
                // currentOtp faqat vaqtinchalik xotirada, saqlamaymiz
                const usersToSave = users.map(({ currentOtp, ...rest }) => rest);
                
                localStorage.setItem('products', JSON.stringify(products));
                localStorage.setItem('customers', JSON.stringify(customers));
                localStorage.setItem('users', JSON.stringify(usersToSave));
                localStorage.setItem('suppliers', JSON.stringify(suppliers));
            } catch (e) {
                alert("Ma'lumotlarni saqlashda xatolik yuz berdi. Brauzer xotirasi to'la bo'lishi mumkin.");
            }
        }

        function generateId(arr) {
            return arr.length > 0 ? Math.max(...arr.map(item => item.id)) + 1 : 1;
        }

        function formatMoney(amount) {
            if (typeof amount !== 'number') return '0 so\'m';
            return new Intl.NumberFormat('uz-UZ', { style: 'currency', currency: 'UZS', minimumFractionDigits: 0 }).format(amount).replace(/\sUZS$/, ' so\'m');
        }

        // ===============================================
        // ========== UMUMIY INTERFEYS FUNKSIYALARI ==========
        // ===============================================

        function openModal(id) { 
            const m = document.getElementById(id); 
            m.style.display = 'flex'; 
            setTimeout(() => m.classList.add('show'), 10); 
        }
        function closeModal(id) { 
            const m = document.getElementById(id); 
            m.classList.remove('show'); 
            setTimeout(() => {
                m.style.display = 'none';
            }, 300); 
            if (id === 'profileMenu') { document.getElementById('profileMenu').classList.remove('show'); }
            
            if (id === 'forgotPasswordModal') {
                document.getElementById('fp-step-1').style.display = 'block';
                document.getElementById('fp-step-2').style.display = 'none';
                document.getElementById('fp-step-3').style.display = 'none';
                document.getElementById('otp-info-box').style.display = 'none'; 
                resetUser = null;
            }
        }

        function togglePasswordVisibility(inputId, toggleEl) {
            const input = document.getElementById(inputId);
            if (input.type === "password") {
                input.type = "text";
                toggleEl.innerText = 'üîí';
            } else {
                input.type = "password";
                toggleEl.innerText = 'üëÅÔ∏è';
            }
        }

        function toggleProfileMenu() {
            const menu = document.getElementById('profileMenu');
            menu.classList.toggle('show');
        }

        function toggleMenu(submenuId, menuItemEl) {
            const submenu = document.getElementById(submenuId);
            const isOpen = submenu.style.maxHeight && submenu.style.maxHeight !== "0px";
            
            // Faqat tegishli menularni yopish/ochish
            if (isOpen) {
                submenu.style.maxHeight = null;
                menuItemEl.classList.remove('open');
            } else {
                submenu.style.maxHeight = submenu.scrollHeight + "px";
                menuItemEl.classList.add('open');
            }
            if (menuItemEl) {
                document.querySelectorAll('.menu-item').forEach(item => item.classList.remove('active'));
                menuItemEl.classList.add('active');
            }
        }


        function showPage(pageName) {
            document.querySelectorAll('.page-section').forEach(p => p.classList.remove('active-page'));
            const currentPage = document.getElementById('page-' + pageName);
            if (currentPage) currentPage.classList.add('active-page');
            
            document.querySelectorAll('.menu-item, .submenu-item').forEach(item => item.classList.remove('active'));
            
            // Faqat o'sha menyuni faollashtirish
            if (['products', 'customers', 'users', 'suppliers'].includes(pageName)) {
                const menuItem = document.getElementById('menu-' + pageName);
                if (menuItem) menuItem.classList.add('active');
                const menuDataEl = document.querySelector('[onclick="toggleMenu(\'submenu-data\', this)"]');
                 if (menuDataEl) {
                    menuDataEl.classList.add('active');
                    menuDataEl.classList.add('open');
                 }
                const submenuData = document.getElementById('submenu-data');
                if (submenuData) submenuData.style.maxHeight = submenuData.scrollHeight + "px";
            } else {
                 const menuItem = document.querySelector(`[onclick="showPage('${pageName}')"]`);
                 if (menuItem) menuItem.classList.add('active');
                 
                 // Agar boshqa menyu tanlansa Ma'lumotlar submenu'sini yopish
                 const submenuData = document.getElementById('submenu-data');
                 if (submenuData) submenuData.style.maxHeight = null;
                 const menuDataEl = document.querySelector('[onclick="toggleMenu(\'submenu-data\', this)"]');
                 if (menuDataEl) menuDataEl.classList.remove('open');
            }


            // Sahifalarni yuklash
            if(pageName === 'sales') { renderInventory(currentSearchQuery.sales); renderCart(); } 
            else if (pageName === 'products') { renderProducts(currentSearchQuery.products); }
            else if (pageName === 'customers') { renderCustomers(currentSearchQuery.customers); }
            else if (pageName === 'users') { renderUsers(currentSearchQuery.users); }
            else if (pageName === 'suppliers') { renderSuppliers(currentSearchQuery.suppliers); }
            else if (pageName === 'reports') { renderReports(currentSearchQuery.reports); } 
            
            // Tanlangan elementlarni tozalash
            selectedProductId = null; 
            selectedCustomerId = null; 
            selectedUserId = null; 
            selectedSupplierId = null; 
            
        }

        function selectRow(row, actualId, type) {
            const tableId = type === 'product' ? 'products' : type === 'customer' ? 'customers' : type === 'user' ? 'users' : type === 'supplier' ? 'suppliers' : type === 'report' ? 'reports' : '';
            if (tableId) {
                document.querySelectorAll(`#page-${tableId} table tbody tr, #reports-table tbody tr, #inventory-table tbody tr`).forEach(r => r.classList.remove('selected-row'));
                row.classList.add('selected-row');
            }

            if (type === 'product' || type === 'report' || type === 'inventory') selectedProductId = actualId;
            else if (type === 'customer') selectedCustomerId = actualId;
            else if (type === 'user') selectedUserId = actualId;
            else if (type === 'supplier') selectedSupplierId = actualId;
        }


        // ===============================================
        // ========== AVTORIZATSIYA FUNKSIYALARI ==========
        // ===============================================

        function toggleUserMenuVisibility() {
            const userMenu = document.getElementById('menu-users');
            // Foydalanuvchilar menyusi faqat roli Boshliq bo'lganda ko'rinadi
            if (currentUser && currentUser.role === 'Boshliq') {
                 userMenu.style.display = 'block';
            } else {
                 userMenu.style.display = 'none';
            }
        }

        function updateProfileUI() {
            if (currentUser) {
                const userImageEl = document.getElementById('user-profile-img');
                const userNameEl = document.getElementById('current-user-name');
                const userRoleEl = document.getElementById('current-user-role');
                
                userNameEl.innerText = currentUser.login;
                userRoleEl.innerText = currentUser.role;
                
                if (currentUser.image) {
                    userImageEl.src = currentUser.image;
                } else {
                    userImageEl.src = `https://via.placeholder.com/150/2ECC71/ffffff?text=${currentUser.login.charAt(0).toUpperCase()}`;
                }
                toggleUserMenuVisibility();
            }
        }

        function checkLogin() {
            const login = document.getElementById('login-input').value.trim();
            const password = document.getElementById('password-input').value;
            const errorEl = document.getElementById('login-error');
            errorEl.innerText = '';

            const user = users.find(u => u.login === login && u.password === password);

            if (user) {
                currentUser = user;
                
                // --- MUHIM O'ZGARISH: Kirishdan oldin cart ni tozalash
                cart = []; 

                closeModal('loginModal');
                
                document.getElementById('main-app').style.display = 'flex'; 
                
                updateProfileUI();
                showPage('products'); 

                const otp = Math.floor(1000 + Math.random() * 9000); 
                const userIndex = users.findIndex(u => u.id === user.id);
                if (userIndex !== -1) {
                    users[userIndex].currentOtp = otp.toString();
                }

                saveData(); 
            } else {
                errorEl.innerText = "Noto'g'ri login yoki parol!";
            }
        }

        function logout() {
            currentUser = null;
            document.getElementById('main-app').style.display = 'none'; 
            openLoginModal(); 
            closeModal('profileArea'); 
        }

        function goBack() {
             if (confirm("Haqiqatan ham tizimdan chiqishni xohlaysizmi?")) {
                 logout();
             }
        }

        function openLoginModal(fromInside = false) {
             document.getElementById('login-error').innerText = '';
             openModal('loginModal');
             if(fromInside && currentUser){
                 document.getElementById('main-app').style.display = 'none';
                 currentUser = null;
             }
        }

        function openRegisterModal(fromAuth = false) {
             if (fromAuth) closeModal('loginModal');
             document.getElementById('reg-login').value = '';
             document.getElementById('reg-password').value = '';
             document.getElementById('reg-phone').value = '';
             document.getElementById('register-error').innerText = '';
             document.getElementById('reg-file-name').innerText = 'Rasm tanlanmagan';
             document.getElementById('reg-profile-file').value = ''; 
             openModal('registerModal');
        }

        function openForgotPasswordModal(fromAuth = false) {
             if (fromAuth) closeModal('loginModal');
             document.getElementById('fp-step-1').style.display = 'block';
             document.getElementById('fp-step-2').style.display = 'none';
             document.getElementById('fp-step-3').style.display = 'none';
             document.getElementById('fp-login').value = '';
             document.getElementById('fp-error').innerText = '';
             document.getElementById('otp-info-box').style.display = 'none'; 
             openModal('forgotPasswordModal');
        }

        function registerUser() {
            const login = document.getElementById('reg-login').value.trim();
            const password = document.getElementById('reg-password').value;
            const phone = document.getElementById('reg-phone').value.trim();
            const role = document.getElementById('reg-role').value;
            const errorEl = document.getElementById('register-error');
            errorEl.innerText = '';
            
            if (!login || !password || !phone) {
                errorEl.innerText = "Barcha maydonlarni to'ldirish shart.";
                return;
            }
            if (users.some(u => u.login === login)) {
                errorEl.innerText = "Bu login band qilingan. Boshqa login kiriting.";
                return;
            }
            if (password.length < 3) {
                 errorEl.innerText = "Parol kamida 3 belgidan iborat bo'lishi kerak.";
                 return;
            }

            const imageFile = document.getElementById('reg-profile-file').files[0];
            let userImage = null;

            if (imageFile) {
                userImage = `https://via.placeholder.com/150/3498DB/ffffff?text=${login.charAt(0).toUpperCase()}`;
            }

            const newUser = {
                id: generateId(users),
                login,
                password,
                role,
                image: userImage,
                phone: phone, 
                currentOtp: null
            };

            users.push(newUser);
            saveData();
            alert(`Foydalanuvchi muvaffaqiyatli ro'yxatdan o'tdi. Login: ${login}`);
            closeModal('registerModal');
            openLoginModal();
        }

        function checkLoginForReset() {
            const login = document.getElementById('fp-login').value.trim();
            const errorEl = document.getElementById('fp-error');
            errorEl.innerText = '';
            
            const user = users.find(u => u.login === login);
            
            if (user) {
                if (user.currentOtp) {
                     resetUser = user;
                     document.getElementById('fp-step-1').style.display = 'none';
                     document.getElementById('fp-step-2').style.display = 'block';
                     
                     document.getElementById('generated-otp').innerText = user.currentOtp;
                     document.getElementById('otp-info-box').style.display = 'block'; 
                } else {
                     errorEl.innerText = "Bu akkaunt uchun oldingi kirish kodi topilmadi. Avval tizimga kirishingiz kerak.";
                }

            } else {
                errorEl.innerText = "Bunday login topilmadi.";
            }
        }

        function verifyResetCode() {
            const code = document.getElementById('fp-code-input').value.trim();
            const errorEl = document.getElementById('fp-error-2');
            errorEl.innerText = '';

            if (!resetUser || code.length !== 4) {
                 errorEl.innerText = "Kod noto'g'ri formatda yoki Foydalanuvchi aniqlanmadi.";
                 return;
            }

            if (code === resetUser.currentOtp) {
                 document.getElementById('fp-step-2').style.display = 'none';
                 document.getElementById('fp-step-3').style.display = 'block';
                 document.getElementById('otp-info-box').style.display = 'none'; 
            } else {
                 errorEl.innerText = "Kod noto'g'ri. Iltimos, qayta tekshiring.";
            }
        }

        function resetPassword() {
            const newPassword = document.getElementById('fp-new-password').value;
            const confirmPassword = document.getElementById('fp-confirm-password').value;
            const errorEl = document.getElementById('fp-error-3');
            errorEl.innerText = '';

            if (newPassword !== confirmPassword) {
                errorEl.innerText = "Yangi parol va tasdiqlash paroli mos kelmadi.";
                return;
            }
            if (newPassword.length < 3) {
                 errorEl.innerText = "Parol kamida 3 belgidan iborat bo'lishi kerak.";
                 return;
            }
            
            const userIndex = users.findIndex(u => u.id === resetUser.id);
            if (userIndex !== -1) {
                users[userIndex].password = newPassword;
                users[userIndex].currentOtp = null; 
                saveData();
                alert("Parol muvaffaqiyatli o'zgartirildi!");
                closeModal('forgotPasswordModal');
                openLoginModal();
            }
        }
        
        function openEditProfileModal() {
            if (!currentUser) return;
            document.getElementById('edit-login').value = currentUser.login;
            document.getElementById('edit-phone').value = currentUser.phone || '';
            document.getElementById('edit-password').value = '';
            document.getElementById('edit-profile-error').innerText = '';
            
            const imgEl = document.getElementById('edit-profile-img');
            imgEl.src = currentUser.image || `https://via.placeholder.com/150/2ECC71/ffffff?text=${currentUser.login.charAt(0).toUpperCase()}`;
            
            openModal('editProfileModal');
        }

        function handleEditProfileImage(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('edit-profile-img').src = e.target.result;
                    currentUser.image = e.target.result; 
                };
                reader.readAsDataURL(file);
            }
        }

        function saveProfileChanges() {
            const newLogin = document.getElementById('edit-login').value.trim();
            const newPassword = document.getElementById('edit-password').value;
            const newPhone = document.getElementById('edit-phone').value.trim();
            const errorEl = document.getElementById('edit-profile-error');
            errorEl.innerText = '';

            if (!newLogin) {
                errorEl.innerText = "Login bo'sh bo'lmasligi kerak.";
                return;
            }
            
            const userIndex = users.findIndex(u => u.id === currentUser.id);

            if (userIndex !== -1) {
                if (users.some(u => u.login === newLogin && u.id !== currentUser.id)) {
                    errorEl.innerText = "Bu login allaqachon band qilingan.";
                    return;
                }

                users[userIndex].login = newLogin;
                users[userIndex].phone = newPhone;
                
                if (newPassword && newPassword.length >= 3) {
                    users[userIndex].password = newPassword;
                } else if (newPassword) {
                    errorEl.innerText = "Parol kamida 3 belgi bo'lishi kerak. Saqlash uchun Parolni tozalang yoki uzunroq parol kiriting.";
                    return;
                }
                
                currentUser = users[userIndex]; 
                saveData();
                updateProfileUI(); 
                alert("Profil ma'lumotlari muvaffaqiyatli saqlandi!");
                closeModal('editProfileModal');
            }
        }

        function updateFileNameDisplay(inputId, textId) {
            const input = document.getElementById(inputId);
            const display = document.getElementById(textId);
            if (input.files.length > 0) {
                display.innerText = input.files[0].name;
            } else {
                display.innerText = 'Rasm tanlanmagan';
            }
        }

        // ===============================================
        // ========== 1. TOVARLAR (PRODUCTS) CRUD ==========
        // ===============================================

        function renderProducts(filterQuery = '') {
            if (!currentUser) return; // Foydalanuvchi tekshiruvi
            currentSearchQuery.products = filterQuery.toLowerCase();
            const tbody = document.getElementById('products-body');
            tbody.innerHTML = '';
            
            // --- MUHIM O'ZGARISH: Faqat o'sha foydalanuvchiga tegishli tovarlar
            const filteredProducts = products.filter(p => 
                p.userId === currentUser.id && 
                p.name.toLowerCase().includes(currentSearchQuery.products)
            );

            filteredProducts.forEach((p, index) => {
                const row = tbody.insertRow();
                row.onclick = () => selectRow(row, p.id, 'product');
                row.insertCell().innerText = index + 1;
                row.insertCell().innerText = p.name;
                row.insertCell().innerText = formatMoney(p.buy);
                row.insertCell().innerText = formatMoney(p.sell);
                row.insertCell().innerText = p.stock;
            });
        }

        function openProductModal(isEdit) {
            // ... (qolgan funksiya bir xil)
            const modalTitle = document.getElementById('p-modal-title');
            const nameInput = document.getElementById('p-name');
            const buyInput = document.getElementById('p-buy');
            const sellInput = document.getElementById('p-sell');
            const stockInput = document.getElementById('p-stock');
            
            isEditMode = isEdit;
            
            if (isEdit) {
                if (!selectedProductId) {
                    alert("Iltimos, o'zgartirish uchun avval tovarni tanlang.");
                    return;
                }
                const product = products.find(p => p.id === selectedProductId && p.userId === currentUser.id);
                if (!product) {
                    alert("Bu tovar sizga tegishli emas yoki topilmadi.");
                    return;
                }

                modalTitle.innerText = "Tovarni o'zgartirish";
                nameInput.value = product.name;
                buyInput.value = product.buy;
                sellInput.value = product.sell;
                stockInput.value = product.stock;

            } else {
                modalTitle.innerText = "Tovarni qo'shish";
                nameInput.value = '';
                buyInput.value = '';
                sellInput.value = '';
                stockInput.value = '';
                selectedProductId = null;
            }

            openModal('productModal');
        }

        function saveProduct() {
            if (!currentUser) return;

            const name = document.getElementById('p-name').value.trim();
            const buy = parseFloat(document.getElementById('p-buy').value);
            const sell = parseFloat(document.getElementById('p-sell').value);
            const stock = parseInt(document.getElementById('p-stock').value);

            if (!name || isNaN(buy) || isNaN(sell) || isNaN(stock) || buy < 0 || sell < 0 || stock < 0) {
                alert("Iltimos, barcha maydonlarni to'g'ri to'ldiring. Narx va qoldiqlar manfiy bo'lmasligi kerak.");
                return;
            }

            if (isEditMode && selectedProductId) {
                const index = products.findIndex(p => p.id === selectedProductId && p.userId === currentUser.id);
                if (index !== -1) {
                    products[index] = { 
                        ...products[index], 
                        name, 
                        buy, 
                        sell, 
                        stock 
                    };
                    alert(`Tovar "${name}" muvaffaqiyatli o'zgartirildi!`);
                } else {
                     alert("Xatolik: Tovar topilmadi yoki sizga tegishli emas.");
                     return;
                }
            } else {
                const newProduct = {
                    id: generateId(products),
                    userId: currentUser.id, // --- MUHIM O'ZGARISH: Hozirgi foydalanuvchi ID'sini qo'shish
                    name,
                    buy,
                    sell,
                    stock
                };
                products.push(newProduct);
                alert(`Tovar "${name}" muvaffaqiyatli qo'shildi!`);
            }

            saveData();
            closeModal('productModal');
            renderProducts(currentSearchQuery.products);
        }

        function deleteProduct() {
            if (!currentUser || !selectedProductId) {
                alert("Iltimos, o'chirish uchun avval tovarni tanlang.");
                return;
            }
            
            const product = products.find(p => p.id === selectedProductId && p.userId === currentUser.id);
            if (!product) {
                 alert("Bu tovar sizga tegishli emas yoki topilmadi.");
                 return;
            }
            
            if (confirm(`Haqiqatan ham "${product.name}" nomli tovarni o'chirishni xohlaysizmi?`)) {
                products = products.filter(p => p.id !== selectedProductId || p.userId !== currentUser.id);
                saveData();
                renderProducts(currentSearchQuery.products);
                selectedProductId = null;
                alert("Tovar muvaffaqiyatli o'chirildi.");
            }
        }

        function searchProducts(query) {
            renderProducts(query);
        }

        // ===============================================
        // ========== 2. XARIDORLAR (CUSTOMERS) CRUD ==========
        // ===============================================

        function renderCustomers(filterQuery = '') {
            if (!currentUser) return;
            currentSearchQuery.customers = filterQuery.toLowerCase();
            const tbody = document.getElementById('customers-body');
            tbody.innerHTML = '';
            
            // --- MUHIM O'ZGARISH: Faqat o'sha foydalanuvchiga tegishli xaridorlar
            const filteredCustomers = customers.filter(c => 
                c.userId === currentUser.id &&
                (c.name.toLowerCase().includes(currentSearchQuery.customers) || c.phone.includes(currentSearchQuery.customers))
            );

            filteredCustomers.forEach((c, index) => {
                const row = tbody.insertRow();
                row.onclick = () => selectRow(row, c.id, 'customer');
                row.insertCell().innerText = index + 1;
                row.insertCell().innerText = c.name;
                row.insertCell().innerText = c.phone;
                row.insertCell().innerText = c.address;
            });
        }

        function openCustomerModal(isEdit) {
            // ... (qolgan funksiya bir xil)
            const modalTitle = document.getElementById('c-modal-title');
            const nameInput = document.getElementById('c-name');
            const phoneInput = document.getElementById('c-phone');
            const addressInput = document.getElementById('c-address');
            
            isEditMode = isEdit;
            
            if (isEdit) {
                if (!selectedCustomerId) {
                    alert("Iltimos, o'zgartirish uchun avval xaridorni tanlang.");
                    return;
                }
                const customer = customers.find(c => c.id === selectedCustomerId && c.userId === currentUser.id);
                 if (!customer) {
                    alert("Bu xaridor sizga tegishli emas yoki topilmadi.");
                    return;
                }

                modalTitle.innerText = "Xaridorni o'zgartirish";
                nameInput.value = customer.name;
                phoneInput.value = customer.phone;
                addressInput.value = customer.address;

            } else {
                modalTitle.innerText = "Xaridor qo'shish";
                nameInput.value = '';
                phoneInput.value = '';
                addressInput.value = '';
                selectedCustomerId = null;
            }

            openModal('customerModal');
        }

        function saveCustomer() {
             if (!currentUser) return;
            const name = document.getElementById('c-name').value.trim();
            const phone = document.getElementById('c-phone').value.trim();
            const address = document.getElementById('c-address').value.trim();

            if (!name || !phone) {
                alert("Ism va Telefon maydonlarini to'ldirish shart.");
                return;
            }

            if (isEditMode && selectedCustomerId) {
                const index = customers.findIndex(c => c.id === selectedCustomerId && c.userId === currentUser.id);
                if (index !== -1) {
                    customers[index] = { 
                        ...customers[index], 
                        name, 
                        phone, 
                        address 
                    };
                    alert(`Xaridor "${name}" muvaffaqiyatli o'zgartirildi!`);
                } else {
                     alert("Xatolik: Xaridor topilmadi yoki sizga tegishli emas.");
                     return;
                }
            } else {
                const newCustomer = {
                    id: generateId(customers),
                    userId: currentUser.id, // --- MUHIM O'ZGARISH
                    name,
                    phone,
                    address
                };
                customers.push(newCustomer);
                alert(`Xaridor "${name}" muvaffaqiyatli qo'shildi!`);
            }

            saveData();
            closeModal('customerModal');
            renderCustomers(currentSearchQuery.customers);
        }

        function deleteCustomer() {
            if (!currentUser || !selectedCustomerId) {
                alert("Iltimos, o'chirish uchun avval xaridorni tanlang.");
                return;
            }
            
            const customer = customers.find(c => c.id === selectedCustomerId && c.userId === currentUser.id);
            if (!customer) {
                 alert("Bu xaridor sizga tegishli emas yoki topilmadi.");
                 return;
            }
            
            if (confirm(`Haqiqatan ham "${customer.name}" nomli xaridorni o'chirishni xohlaysizmi?`)) {
                customers = customers.filter(c => c.id !== selectedCustomerId || c.userId !== currentUser.id);
                saveData();
                renderCustomers(currentSearchQuery.customers);
                selectedCustomerId = null;
                alert("Xaridor muvaffaqiyatli o'chirildi.");
            }
        }

        function searchCustomers(query) {
            renderCustomers(query);
        }

        // ===============================================
        // ========== 3. FOYDALANUVCHILAR (USERS) CRUD ==========
        // ===============================================
        // ... (Bu funksiyalar foydalanuvchi-mustaqil qoladi, chunki barcha foydalanuvchilarni Boshliq ko'rishi kerak)
        // ... (Faqat `renderUsers` funksiyasining boshidagi 'Boshliq' tekshiruvi muhim)
        
        function renderUsers(filterQuery = '') {
             if (!currentUser || currentUser.role !== 'Boshliq') {
                 document.getElementById('page-users').innerHTML = '<div style="padding: 20px; text-align: center; color: #E74C3C;">Sizga ushbu sahifani ko\'rishga ruxsat yo\'q.</div>';
                 return;
            }
            currentSearchQuery.users = filterQuery.toLowerCase();
            const tbody = document.getElementById('users-body');
            tbody.innerHTML = '';
            
            const filteredUsers = users.filter(u => 
                u.login.toLowerCase().includes(currentSearchQuery.users) ||
                u.phone.includes(currentSearchQuery.users)
            );

            filteredUsers.forEach((u, index) => {
                const row = tbody.insertRow();
                row.onclick = () => selectRow(row, u.id, 'user');
                row.insertCell().innerText = index + 1;
                row.insertCell().innerText = u.login;
                row.insertCell().innerText = u.role;
                row.insertCell().innerText = u.phone;
            });
        }
        // ... (Qolgan user CRUD funksiyalari o'zgarishsiz qoldi)


        // ===============================================
        // ========== 4. YUK BERUVCHILAR (SUPPLIERS) CRUD ==========
        // ===============================================

        function renderSuppliers(filterQuery = '') {
            if (!currentUser) return;
            currentSearchQuery.suppliers = filterQuery.toLowerCase();
            const tbody = document.getElementById('suppliers-body');
            tbody.innerHTML = '';
            
            // --- MUHIM O'ZGARISH: Faqat o'sha foydalanuvchiga tegishli yuk beruvchilar
            const filteredSuppliers = suppliers.filter(s => 
                s.userId === currentUser.id &&
                (s.name.toLowerCase().includes(currentSearchQuery.suppliers) || s.phone.includes(currentSearchQuery.suppliers))
            );

            filteredSuppliers.forEach((s, index) => {
                const row = tbody.insertRow();
                row.onclick = () => selectRow(row, s.id, 'supplier');
                row.insertCell().innerText = index + 1;
                row.insertCell().innerText = s.name;
                row.insertCell().innerText = s.phone;
                row.insertCell().innerText = s.bankAccount;
            });
        }

        function openSupplierModal(isEdit) {
            // ... (qolgan funksiya bir xil)
            const modalTitle = document.getElementById('s-modal-title');
            const nameInput = document.getElementById('s-name');
            const phoneInput = document.getElementById('s-phone');
            const addressInput = document.getElementById('s-address');
            const bankInput = document.getElementById('s-bank');
            
            isEditMode = isEdit;
            
            if (isEdit) {
                if (!selectedSupplierId) {
                    alert("Iltimos, o'zgartirish uchun avval yuk beruvchini tanlang.");
                    return;
                }
                const supplier = suppliers.find(s => s.id === selectedSupplierId && s.userId === currentUser.id);
                if (!supplier) {
                     alert("Bu yuk beruvchi sizga tegishli emas yoki topilmadi.");
                     return;
                }

                modalTitle.innerText = "Yuk beruvchini o'zgartirish";
                nameInput.value = supplier.name;
                phoneInput.value = supplier.phone;
                addressInput.value = supplier.address;
                bankInput.value = supplier.bankAccount;

            } else {
                modalTitle.innerText = "Yuk beruvchi qo'shish";
                nameInput.value = '';
                phoneInput.value = '';
                addressInput.value = '';
                bankInput.value = '';
                selectedSupplierId = null;
            }

            openModal('supplierModal');
        }

        function saveSupplier() {
            if (!currentUser) return;
            const name = document.getElementById('s-name').value.trim();
            const phone = document.getElementById('s-phone').value.trim();
            const address = document.getElementById('s-address').value.trim();
            const bankAccount = document.getElementById('s-bank').value.trim();

            if (!name || !phone) {
                alert("Ism va Telefon maydonlarini to'ldirish shart.");
                return;
            }

            if (isEditMode && selectedSupplierId) {
                const index = suppliers.findIndex(s => s.id === selectedSupplierId && s.userId === currentUser.id);
                if (index !== -1) {
                    suppliers[index] = { 
                        ...suppliers[index], 
                        name, 
                        phone, 
                        address,
                        bankAccount
                    };
                    alert(`Yuk beruvchi "${name}" muvaffaqiyatli o'zgartirildi!`);
                } else {
                     alert("Xatolik: Yuk beruvchi topilmadi yoki sizga tegishli emas.");
                     return;
                }
            } else {
                const newSupplier = {
                    id: generateId(suppliers),
                    userId: currentUser.id, // --- MUHIM O'ZGARISH
                    name,
                    phone,
                    address,
                    bankAccount
                };
                suppliers.push(newSupplier);
                alert(`Yuk beruvchi "${name}" muvaffaqiyatli qo'shildi!`);
            }

            saveData();
            closeModal('supplierModal');
            renderSuppliers(currentSearchQuery.suppliers);
        }

        function deleteSupplier() {
            if (!currentUser || !selectedSupplierId) {
                alert("Iltimos, o'chirish uchun avval yuk beruvchini tanlang.");
                return;
            }
            
            const supplier = suppliers.find(s => s.id === selectedSupplierId && s.userId === currentUser.id);
            if (!supplier) {
                 alert("Bu yuk beruvchi sizga tegishli emas yoki topilmadi.");
                 return;
            }
            
            if (confirm(`Haqiqatan ham "${supplier.name}" nomli yuk beruvchini o'chirishni xohlaysizmi?`)) {
                suppliers = suppliers.filter(s => s.id !== selectedSupplierId || s.userId !== currentUser.id);
                saveData();
                renderSuppliers(currentSearchQuery.suppliers);
                selectedSupplierId = null;
                alert("Yuk beruvchi muvaffaqiyatli o'chirildi.");
            }
        }

        function contactSupplier() { 
             if (!selectedSupplierId) { alert("Iltimos, bog'lanish uchun avval yuk beruvchini tanlang."); return; }
             const supplier = suppliers.find(s => s.id === selectedSupplierId && s.userId === currentUser.id);
             if (!supplier) {
                 alert("Bu yuk beruvchi sizga tegishli emas yoki topilmadi.");
                 return;
             }
             alert(`Yuk beruvchi: ${supplier.name}\nTelefon raqami: ${supplier.phone}\nBank hisobi: ${supplier.bankAccount}\n\nBog'lanish uchun mobil telefoningizni ishga tushiring.`);
        }

        function searchSuppliers(query) {
            renderSuppliers(query);
        }
        
        // ===============================================
        // ========== 5. SAVDO OYNASI (SALES) FUNKSIYALARI ==========
        // ===============================================
        
        function calculateTotalCartSum() {
            return cart.reduce((total, item) => total + (item.sell * item.quantity), 0);
        }

        function renderCart() {
            // ... (o'zgarishsiz)
            const tbody = document.getElementById('cart-body');
            tbody.innerHTML = '';
            const totalSumEl = document.getElementById('total-sum-value');

            if (cart.length === 0) {
                tbody.innerHTML = '<tr><td colspan="4" style="text-align:center; color:#999; padding: 20px;">Savat bo\'sh</td></tr>';
                totalSumEl.innerText = formatMoney(0);
                return;
            }

            cart.forEach(item => {
                const row = tbody.insertRow();
                row.insertCell().innerText = item.name;
                row.insertCell().innerText = formatMoney(item.sell);
                
                const qtyCell = row.insertCell();
                // Ombor ma'lumotlarini to'g'ri yangilash uchun haqiqiy tovar qoldig'ini topish
                const productInStock = products.find(p => p.id === item.id && p.userId === currentUser.id);
                const maxStock = productInStock ? productInStock.stock : 0;
                
                qtyCell.innerHTML = `
                    <div class="quantity-controls">
                        <button class="qty-btn" onclick="changeCartQuantity(${item.id}, -1)">-</button>
                        <input type="number" value="${item.quantity}" min="1" max="${maxStock}" onchange="changeCartQuantity(${item.id}, 0, this.value)">
                        <button class="qty-btn" onclick="changeCartQuantity(${item.id}, 1)">+</button>
                    </div>
                `;

                const deleteCell = row.insertCell();
                deleteCell.innerHTML = `<button class="btn btn-delete" style="padding: 5px 10px;" onclick="deleteCartItem(${item.id})">x</button>`;
            });

            totalSumEl.innerText = formatMoney(calculateTotalCartSum());
        }

        function renderInventory(filterQuery = '') {
            if (!currentUser) return;
            currentSearchQuery.sales = filterQuery.toLowerCase();
            const tbody = document.getElementById('inventory-body');
            tbody.innerHTML = '';
            
            // --- MUHIM O'ZGARISH: Faqat o'sha foydalanuvchiga tegishli tovarlar
            const filteredInventory = products.filter(p => 
                p.userId === currentUser.id &&
                p.stock > 0 &&
                p.name.toLowerCase().includes(currentSearchQuery.sales)
            );

            filteredInventory.forEach(p => {
                const row = tbody.insertRow();
                row.ondblclick = () => addItemToCart(p.id); 
                row.insertCell().innerText = p.name;
                row.insertCell().innerText = formatMoney(p.sell);
                row.insertCell().innerText = p.stock;
            });
        }

        function searchInventory(query) {
            renderInventory(query);
        }

        function addItemToCart(productId) {
            if (!currentUser) return;
            // Faqat hozirgi foydalanuvchining tovarini qidirish
            const product = products.find(p => p.id === productId && p.userId === currentUser.id); 
            if (!product || product.stock <= 0) {
                alert("Omborda yetarli miqdor mavjud emas!");
                return;
            }

            const cartItem = cart.find(item => item.id === productId);

            if (cartItem) {
                if (cartItem.quantity < product.stock) {
                    cartItem.quantity += 1;
                } else {
                     alert(`Maksimal qoldiqga yetildi (${product.stock} dona).`);
                     return;
                }
            } else {
                cart.push({
                    id: product.id,
                    name: product.name,
                    sell: product.sell,
                    stock: product.stock, 
                    quantity: 1
                });
            }

            renderCart();
            document.querySelectorAll('#inventory-table tbody tr').forEach(r => r.classList.remove('selected-row'));
            selectedProductId = null;
        }

        function changeCartQuantity(itemId, change = 0, inputQty = null) {
            const cartItem = cart.find(item => item.id === itemId);
            if (!cartItem) return;

            const productInStock = products.find(p => p.id === itemId && p.userId === currentUser.id);
            const maxStock = productInStock ? productInStock.stock : 0;
            
            let newQty;
            if (inputQty !== null) {
                newQty = parseInt(inputQty);
            } else {
                newQty = cartItem.quantity + change;
            }

            if (isNaN(newQty) || newQty < 1) newQty = 1;
            // Qoldiqdan oshirmaslik
            if (newQty > maxStock) newQty = maxStock;
            
            if (newQty === 0) {
                deleteCartItem(itemId);
                return;
            }

            cartItem.quantity = newQty;
            renderCart();
        }

        function deleteCartItem(itemId) {
            cart = cart.filter(item => item.id !== itemId);
            renderCart();
        }

        function clearCart() {
            if (cart.length === 0 || confirm("Savatdagi barcha tovarlarni o'chirishni xohlaysizmi?")) {
                cart = [];
                renderCart();
            }
        }


        // ===============================================
        // ========== 6. CHEK (RECEIPT) VA TO'LOV FUNKSIYALARI ==========
        // ===============================================

        function makePayment() {
            if (cart.length === 0) {
                alert("Savat bo'sh. To'lovni amalga oshirish mumkin emas.");
                return;
            }
            
            const total = calculateTotalCartSum();

            if (confirm(`Jami: ${formatMoney(total)}. To'lovni tasdiqlaysizmi?`)) {
                
                // 1. OMBORNI YANGILASH VA SAQLASH
                const paidCartItems = [...cart]; 
                
                cart.forEach(cartItem => {
                    // Faqat hozirgi foydalanuvchiga tegishli tovar qoldig'ini kamaytirish
                    const productIndex = products.findIndex(p => p.id === cartItem.id && p.userId === currentUser.id);
                    if (productIndex !== -1) {
                        products[productIndex].stock -= cartItem.quantity;
                    }
                });

                saveData();

                // 2. CHEKNI YARATISH VA KO'RSATISH
                const receiptContent = document.getElementById('receipt-content');
                receiptContent.innerHTML = generateReceiptHTML(paidCartItems, total);
                openModal('receiptModal'); 

                // 3. SAVATNI BO'SHATISH
                cart = [];
                renderCart();
                renderInventory(currentSearchQuery.sales);
            }
        }
        
        function generateReceiptHTML(items, totalAmount) {
             // ... (o'zgarishsiz qoldi)
            const now = new Date();
            const date = now.toLocaleDateString('uz-UZ');
            const time = now.toLocaleTimeString('uz-UZ', { hour: '2-digit', minute: '2-digit' });

            let itemsHTML = '';
            items.forEach(item => {
                const shortName = item.name.length > 20 ? item.name.substring(0, 17) + '...' : item.name;
                
                itemsHTML += `
                    <div class="receipt-line">
                        <span style="max-width: 60%;">${shortName}</span>
                        <span class="receipt-item-qty">${item.quantity} x ${Math.floor(item.sell/1000)}k</span>
                        <span class="receipt-item-price" style="text-align: right;">${formatMoney(item.sell * item.quantity)}</span>
                    </div>
                `;
            });

            return `
                <div class="receipt-header">
                    <h3>KORZINKA.UZ</h3>
                    <p style="margin: 0;">Savdo: ${currentUser.login} (${currentUser.role})</p>
                    <p style="margin: 0;">Chek ‚Ññ: ${Math.floor(100000 + Math.random() * 900000)}</p>
                    <p style="margin: 0;">${date} | ${time}</p>
                </div>
                <div class="receipt-divider"></div>

                ${itemsHTML}
                
                <div class="receipt-divider"></div>
                <div class="receipt-line receipt-total">
                    <span>JAMI SUMMA:</span>
                    <span style="text-align: right;">${formatMoney(totalAmount)}</span>
                </div>
                <div class="receipt-divider"></div>
                
                <div class="receipt-footer">
                    <p style="font-size: 12px; margin-bottom: 0;">Yaxshi kun tilaymiz!</p>
                </div>
            `;
        }
        
        function printReceipt() {
             window.print();
        }

        // ===============================================
        // ========== 7. HISOBO–¢LAR FUNKSIYALARI ==========
        // ===============================================
        
        function getUserLoginById(userId) {
            const user = users.find(u => u.id === userId);
            return user ? `${user.login} (${user.role})` : 'Noma\'lum';
        }

        function renderReports(filterQuery = '') {
            if (!currentUser) return;
            currentSearchQuery.reports = filterQuery.toLowerCase();
            const tbody = document.getElementById('reports-body');
            tbody.innerHTML = '';
            
            let totalSaleValue = 0;

            // --- MUHIM O'ZGARISH: Faqat o'sha foydalanuvchiga tegishli tovarlar
            const filteredProducts = products.filter(p => 
                p.userId === currentUser.id &&
                p.name.toLowerCase().includes(currentSearchQuery.reports)
            );

            filteredProducts.forEach((p, index) => {
                const row = tbody.insertRow();
                row.onclick = () => selectRow(row, p.id, 'report');
                row.insertCell().innerText = index + 1;
                row.insertCell().innerText = p.name;
                row.insertCell().innerText = formatMoney(p.buy);
                row.insertCell().innerText = formatMoney(p.sell);
                row.insertCell().innerText = p.stock;
                row.insertCell().innerText = getUserLoginById(p.userId); // Bu joyda faqat o'zini logini chiqadi
                
                totalSaleValue += p.sell * p.stock; 
            });
            
            document.getElementById('reports-total-value').innerText = formatMoney(totalSaleValue);
        }

        function searchReports(query) {
            renderReports(query);
        }

        // Tizimni yuklashdagi boshlang'ich funksiyalar
        initData();
        // Hozirda currentUser NULL bo'lgani uchun bu funksiyani Login muvaffaqiyatli bo'lganidan keyin chaqiramiz
    </script>
</body>
</html>